<!DOCTYPE HTML>
<html>

<!---
Color scheme:
#D83F87 - Bright pink -  Highlights
#2A1B3D - Deep purple -  Shadows, dark background
#44318D - Light purple - Light background
#8265A7 - Lavender -     List background
#A4B3B6 - Limestone -    Text
--->


<head>
	<meta charset="UTF-8">
	<title>We Love You, Sofy!</title>
	<link rel="stylesheet" href="sofystyle.css">
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
</head>

<body data-rsssl = 1 onload = "loadPage()">
	<img id = "imgSofy" src = "Sofy_Tail.gif">
	<img id = "imgSofyOld" src = "Old_Avatar.png">

	<!---  Blank image tag:
	<img id = "img" src = "">
	--->
	<img id = "imgArn" src = "Arn.jpg">
	<img id = "imgDarkDelight" src = "DarkDelight.webp">
	<img id = "imgEKong1" src = "EKong1.webp">
	<img id = "imgIndras" src = "Indras.png">
	<img id = "imgMango" src = "Mango.gif">
	<img id = "imgMheohkco" src = "Mheohkco.png">
	<img id = "imgSketchy" src = "Sketchy.png">
	<img id = "imgSquish" src = "Squish.gif">
	<img id = "imgViking" src = "Viking.webp">
	<img id = "imgViktorrevolusao" src = "Viktorrevolusao.webp">
	<img id = "imgVPraetor" src = "VPraetor.png">

	<!--- Blank audio tag:
	<audio id = "audio" src = ".mp3" type = "audio/mpeg"></audio>
	--->
	<audio id = "audioArn" src = "Arn.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioDarkDelight" src = "DarkDelight.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioEKong1" src = "EKong1.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioIndras" src = "Intro.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioMango" src = "Mango.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioMheohkco" src = "Mheohkco.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioSketchy" src = "Sketchy.wav" type = "audio/wav"></audio>
	<audio id = "audioSquish" src = "Squish.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioViking" src = "Viking.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioViktorrevolusao" src = "Viktorrevolusao.mp3" type = "audio/mpeg"></audio>
	<audio id = "audioVPraetor" src = "VPraetor.mp3" type = "audio/mpeg"></audio>

	<div id = "nameList">
		<ul>
			<!--- Blank list tag:
			<li id = "link" onclick = "playAudio('')"></li>
			--->
			<li id = "linkIndras" onclick = "playAudio('Indras')">Intro from Indras</li>
			<p>
			<li id = "linkArn" onclick = "playAudio('Arn')">Arnâ™¡</li>
			<li id = "linkDarkDelight" onclick = "playAudio('DarkDelight')">Dark Delight</li>
			<li id = "linkEKong1" onclick = "playAudio('EKong1')">EKong1</li>
			<li id = "linkMango" onclick = "playAudio('Mango')">Mango</li>
			<li id = "linkMheohkco" onclick = "playAudio('Mheohkco')">Mheohkco</li>
			<li id = "linkSketchy" onclick = "playAudio('Sketchy')">SketchybyNature</li>
			<li id = "linkSquish" onclick = "playAudio('Squish')">Squish Mitten</li>
			<li id = "linkViking" onclick = "playAudio('Viking')">The Canadian Viking</li>
			<li id = "linkViktorrevolusao" onclick = "playAudio('Viktorrevolusao')">Viktorrevolusao</li>
			<li id = "linkVPraetor" onclick = "playAudio('VPraetor')">VPraetor</li>
		</ul>
	</div>

	<label class = "containerSwitch">
		<input type = "checkbox" id = "toggleAutoplay" onclick = "toggleCheck()">
		<span class = "slider"></span>
	</label>

	<script>
	
	function loadPage() {
		var listItems = document.getElementsByTagName("li");
		var l = listItems.length;
		for (i = 0; i < l; i++) {
			listItems[i].classList.add('unplayed');
		}

		var timerNostalgia = setTimeout(function() { showOld(); }, 5000);
	}

	function showOld() {
		document.getElementById("imgSofyOld").style.opacity = 100;
		document.getElementById("imgSofy").style.opacity = 0;
		var timerNostalgia = setTimeout(function() { hideOld(); }, 200);
	}
	
	function hideOld() {
		document.getElementById("imgSofyOld").style.opacity = 0;
		document.getElementById("imgSofy").style.opacity = 100;
		var timerNostalgia = setTimeout(function() { showOld(); }, 15000);
	}

	function playAudio(clickedName) {
		stopAllAudio();
		showAvatar(clickedName);
		var audio = document.getElementById("audio" + clickedName);
		audio.play();
		audio.onpause = function() {hideAvatar(clickedName)};
		audio.onended = function() {
			setPlayed(clickedName);
			hideAvatar(clickedName);
			if (document.getElementById("toggleAutoplay").checked == true) {
				toggleCheck();
			}
		}
	}

	function stopAllAudio() {
		/* Stop all audio files */
		var audiolist = document.getElementsByTagName("audio");
		var i;
		for (i = 0; i < audiolist.length; i++) {
			audiolist[i].pause();
			audiolist[i].currentTime = 0;
		}
	}

	function showAvatar(target) {
		var imgTarget = document.getElementById('img' + target);
		var linkTarget = document.getElementById('link' + target);
		var posCounter = 0;
		var startLeft = linkTarget.getBoundingClientRect().left - 5;
		var startTop = linkTarget.getBoundingClientRect().top + 20;
		var endLeft = window.innerWidth / 2 - 64;
		var endTop = window.innerHeight / 2 - 64;
		imgTarget.style.display = "block";
		var idTimer = setInterval(expand, 4);
		function expand() {
			if (posCounter == 250) {
				clearInterval(idTimer);
			} else {
				posCounter++;
				curLeft = ((endLeft - startLeft) / 250) * posCounter + startLeft;
				curTop = ((endTop - startTop) / 250) * posCounter + startTop;
				curWidth = (254 / 250) * posCounter + 2;
				imgTarget.style.height = curWidth + "px";
				imgTarget.style.width = curWidth + "px";
				imgTarget.style.top = curTop + "px";
				imgTarget.style.left = curLeft + "px";
			}
		}
	}

	function hideAvatar(target) {
		var imgTarget = document.getElementById('img' + target);
		var linkTarget = document.getElementById('link' + target);
		var posCounter = 0;
		var startLeft = window.innerWidth / 2 - 64;
		var startTop = window.innerHeight / 2 - 64
		var endLeft = linkTarget.getBoundingClientRect().left - 5;
		var endTop = linkTarget.getBoundingClientRect().top + 20;
		var idTimer = setInterval(contract, 4);
		function contract() {
			if (posCounter == 250) {
				imgTarget.style.display = "none";
				clearInterval(idTimer);
			} else {
				posCounter++;
				curLeft = ((endLeft - startLeft) / 250) * posCounter + startLeft;
				curTop = ((endTop - startTop) / 250) * posCounter + startTop;
				curWidth = 256 - (254 / 250) * posCounter;
				imgTarget.style.height = curWidth + "px";
				imgTarget.style.width = curWidth + "px";
				imgTarget.style.top = curTop + "px";
				imgTarget.style.left = curLeft + "px";
			}
		}
	}
	
	function toggleCheck() {
		var toggle = document.getElementById('toggleAutoplay');
		var unplayedAudios = document.getElementsByClassName('unplayed');
		if (toggle.checked == true) {
			stopAllAudio();
			playAudio(unplayedAudios[0].id.slice(4));
		} else {
			stopAllAudio();
		}
	}

	function setPlayed(target) {
		document.getElementById("link" + target).classList.remove('unplayed');
	}
	</script>

</body>
</html>